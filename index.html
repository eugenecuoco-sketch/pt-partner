<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Finance Organization - Org Chart</title>
    <!-- Load Tailwind CSS for styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                    },
                    colors: {
                        'primary': '#4f46e5',
                        'secondary': '#10b981',
                        'bg-dark': '#1f2937',
                    }
                }
            }
        }
    </script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f3f4f6;
        }
        
        /* --- Card 3D Flip Styles --- */
        .card-container {
            perspective: 1000px;
            height: 25rem; 
            width: 100%;
        }
        .flip-card {
            width: 100%;
            height: 100%;
            transition: transform 0.6s;
            transform-style: preserve-3d;
            position: relative;
        }
        .flip-card.flipped {
            transform: rotateY(180deg);
        }
        .card-face {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            border-radius: 0.75rem;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            padding: 1.5rem;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }
        .card-front {
            background-color: white;
            z-index: 2;
        }
        .card-back {
            background-color: #fef3c7; 
            transform: rotateY(180deg);
        }
        .keyword-list::-webkit-scrollbar {
            width: 4px;
        }
        .keyword-list::-webkit-scrollbar-thumb {
            background-color: #a78bfa;
            border-radius: 2px;
        }

        /* --- Drill Down Layout Styles --- */
        .drill-down-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            width: 100%;
            padding-bottom: 40px;
        }

        /* The vertical line connecting Parent Pill to Focus Card */
        .connector-vertical-top {
            width: 2px;
            height: 30px;
            background-color: #9ca3af;
            margin: 0 auto;
        }

        /* The vertical line connecting Focus Card to Children Container */
        .connector-vertical-bottom {
            width: 2px;
            height: 30px;
            background-color: #9ca3af;
            margin: 0 auto;
        }

        /* The horizontal bar above the children */
        .children-bar {
            width: 80%; /* Width of the horizontal connector line */
            height: 2px;
            background-color: #9ca3af;
            margin: 0 auto;
            position: relative;
        }
        
        /* Children container */
        .children-grid {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 20px;
            width: 100%;
            margin-top: 0;
            padding-top: 20px;
        }
        
        .child-wrapper {
            position: relative;
            display: flex;
            flex-direction: column;
            align-items: center;
            width: 280px;
        }

        /* Vertical line from the horizontal bar down to each child */
        .child-connector {
            position: absolute;
            top: -20px; /* Reaches up to the grid padding */
            left: 50%;
            width: 2px;
            height: 20px;
            background-color: #9ca3af;
        }

        /* Parent Pill Style */
        .parent-pill {
            background-color: #e5e7eb;
            color: #374151;
            padding: 8px 24px;
            border-radius: 9999px;
            font-weight: 600;
            font-size: 0.875rem;
            cursor: pointer;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 8px;
            border: 1px solid #d1d5db;
        }
        .parent-pill:hover {
            background-color: #d1d5db;
            transform: translateY(-1px);
        }

        /* Hero Card (Focused) Override */
        .hero-card-wrapper {
            width: 350px; /* Slightly larger for the focused person */
            margin-bottom: 0;
            z-index: 10;
        }
        
        /* Animations */
        .fade-in {
            animation: fadeIn 0.4s ease-in-out;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* --- Print Styles --- */
        @media print {
            body { background-color: white; }
            header, #search-container, #print-btn-container, .parent-connector-area { display: none !important; }
            .drill-down-container { display: block; }
            .children-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 20px; }
            .card-container { page-break-inside: avoid; height: auto; border: 1px solid #ccc; margin-bottom: 20px; }
            .flip-card { transform: none !important; }
            .card-back { display: none; }
            .card-front { position: relative; box-shadow: none; border: 1px solid #eee; }
        }
    </style>
</head>
<body class="min-h-screen">
    <div id="app" class="max-w-[95%] mx-auto p-4 sm:p-6 lg:p-8">
        <header class="bg-white shadow-lg rounded-xl p-6 mb-8 flex flex-col sm:flex-row justify-between items-center sticky top-0 z-20">
            <div>
                <h1 class="text-3xl font-extrabold text-primary">Finance Organization</h1>
                <p class="text-sm text-gray-500 mt-1">Interactive Org Chart</p>
            </div>
            <div class="flex gap-3 mt-4 sm:mt-0">
                <button onclick="resetToRoot()" class="flex items-center space-x-2 px-4 py-2 text-sm font-medium rounded-lg bg-indigo-100 text-indigo-700 hover:bg-indigo-200 transition">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path><polyline points="9 22 9 12 15 12 15 22"></polyline></svg>
                    <span>Reset View</span>
                </button>
                <button onclick="window.print()" class="flex items-center space-x-2 px-4 py-2 text-sm font-medium rounded-lg shadow-md transition duration-150 ease-in-out bg-gray-800 text-white hover:bg-gray-700">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z" />
                    </svg>
                    <span>Print</span>
                </button>
            </div>
        </header>

        <!-- Main View Area -->
        <div id="main-view" class="view-section">
            <div id="search-container" class="mb-8 relative z-30">
                <input type="text" id="search-input" oninput="handleSearch()" placeholder="Search by name, title, or keywords..."
                       class="w-full p-4 pl-12 border border-gray-300 rounded-xl shadow-sm focus:ring-2 focus:ring-primary focus:border-primary transition text-lg">
                <svg class="absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400 h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg>
            </div>

            <div id="chart-container" class="min-h-[600px]">
                <!-- Dynamic Content Goes Here -->
            </div>
        </div>
    </div>

    <script>
        // --- DATA ---
        const ALL_DATA = [
            // Root
            {
                id: "jerry_dervin",
                name: "Jerry Dervin",
                title: "CFO",
                team: "KNA Finance",
                managerName: "Greg Marino", 
                keywords: ["cfo", "executive", "finance", "planning", "risk management", "capital structure", "compliance", "investor relations"],
                description: "The Chief Financial Officer (CFO) is responsible for all financial aspects of the company, including financial planning, reporting, risk management, and capital structure. The CFO drives sustainable, long-term financial growth and ensures regulatory compliance. They lead the Finance team, partnering with the CEO and executive leadership to guide strategic decision-making and resource allocation across the organization.",
                photoUrl: "https://placehold.co/100x100/1f2937/ffffff?text=JD"
            },
            // Directs of Jerry
            {
                id: "1",
                team: "Financial Systems Oversight",
                name: "Eugene Cuoco",
                title: "Executive Director, Finance B...",
                keywords: ["executive", "leadership", "revenue", "finance systems", "strategy", "governance"],
                description: "Leads the strategic direction and governance for all major financial systems across the organization, ensuring regulatory compliance and operational excellence.",
                managerName: 'Jerry Dervin', 
                photoUrl: "https://placehold.co/100x100/4f46e5/ffffff?text=EC"
            },
            {
                id: "georgi_eliseev",
                name: "Georgi Eliseev",
                title: "Vice President",
                team: "FP&A (Supplemental Education)",
                managerName: "Jerry Dervin",
                keywords: ["fp&a", "planning", "finance", "budgeting", "forecasting", "resource allocation", "operational partnership"],
                description: "Oversees strategic financial planning and analysis (FP&A) for a division, driving budget processes, forecasting, and resource allocation to meet financial targets. Partners with operational leaders to ensure sound financial management.",
                photoUrl: "https://placehold.co/100x100/10b981/ffffff?text=GE"
            },
            {
                id: "gordon_williams",
                name: "Gordon Williams",
                title: "Vice President",
                team: "FP&A (Higher Education)",
                managerName: "Jerry Dervin",
                keywords: ["fp&a", "planning", "finance", "budgeting", "higher education", "resource allocation", "forecasting"],
                description: "Oversees strategic financial planning and analysis (FP&A) for a division, driving budget processes, forecasting, and resource allocation to meet financial targets. Partners with operational leaders to ensure sound financial management.",
                photoUrl: "https://placehold.co/100x100/10b981/ffffff?text=GW"
            },
            {
                id: "jason_shumrak",
                name: "Jason Shumrak",
                title: "Vice President",
                team: "KNA Procurement",
                managerName: "Jerry Dervin",
                keywords: ["procurement", "sourcing", "finance", "vendor negotiations", "contract management", "cost efficiency", "risk reduction"],
                description: "Procurement manages and leads all strategic sourcing activities, vendor negotiations, and contract lifecycle management across the organization. This role develops and executes procurement strategies to optimize cost efficiency, minimize risk, and ensure the timely acquisition of goods and services. They are responsible for compliance, fostering strong supplier relationships, and integrating best-in-class procurement technologies and practices.",
                photoUrl: "https://placehold.co/100x100/10b981/ffffff?text=JS"
            },
             {
                id: "brian_lingen",
                name: "Brian Lingen",
                title: "Executive Director",
                team: "Sales and Revenue Operations",
                managerName: "Jerry Dervin",
                keywords: ["sales", "revenue", "analytics", "process optimization", "sales alignment", "revenue efficiency"],
                description: "Manages a critical and specialized finance-adjacent function, such as Sales and Revenue Operations, focusing on maximizing revenue efficiency, process optimization, and aligning sales activities with financial goals.",
                photoUrl: "https://placehold.co/100x100/10b981/ffffff?text=BL"
            },
             {
                id: "ozerk_gogus",
                name: "Ozerk Gogus",
                title: "Vice President",
                team: "KNA Data & Analytics",
                managerName: "Jerry Dervin",
                keywords: ["data", "analytics", "fp&a", "data governance", "data engineering", "tableau", "infrastructure"],
                description: "Oversees the strategic direction and execution of the organization's data engineering and analytics functions. This includes leading data governance, managing the data infrastructure, and overseeing the development and implementation of reporting structures for all available data assets, utilizing tools such as Tableau and others.",
                photoUrl: "https://placehold.co/100x100/10b981/ffffff?text=OG"
            },
            {
                id: "diane_wright",
                name: "Diane Wright",
                title: "Senior Accounting Manager",
                team: "Accounts Payable",
                managerName: "Jerry Dervin",
                keywords: ["accounting", "accounts payable", "gaap", "general ledger", "financial reporting", "accounts receivable"],
                description: "Manages the day-to-day accounting operations, including accounts payable, accounts receivable, general ledger, and ensures timely and accurate financial reporting in compliance with GAAP.",
                photoUrl: "https://placehold.co/100x100/f59e0b/ffffff?text=DW"
            },
            {
                id: "rose_michaelides",
                name: "Rose Michaelides",
                title: "Director",
                team: "Business Office",
                managerName: "Jerry Dervin",
                keywords: ["business office", "operations", "admin", "contract management", "policy alignment"],
                description: "Manages a core operational function that supports Finance, ensuring efficient administrative processes, contract management, and operational alignment with financial policy.",
                photoUrl: "https://placehold.co/100x100/f59e0b/ffffff?text=RM"
            },
            {
                id: "shannon_gilmer",
                name: "Shannon Gilmer",
                title: "Operations Manager",
                team: "KNA Finance",
                managerName: "Jerry Dervin",
                keywords: ["operations", "finance", "process", "efficiency", "internal controls"],
                description: "Manages the daily financial and administrative operations for a specific finance department, focusing on efficiency, process improvement, and internal controls.",
                photoUrl: "https://placehold.co/100x100/f59e0b/ffffff?text=SG"
            },
            {
                id: "zaida_cintron",
                name: "Zaida Cintron",
                title: "Staff Accountant",
                team: "KNA Finance",
                managerName: "Jerry Dervin",
                keywords: ["accounting", "journal entries", "reconciliations", "month-end close", "financial statements"],
                description: "Performs essential accounting tasks, including journal entries, reconciliations, and assisting with month-end close and financial statement preparation.",
                photoUrl: "https://placehold.co/100x100/f59e0b/ffffff?text=ZC"
            },

            // Directs of Eugene
            {
                id: "2",
                team: "Financial Systems Oversight",
                name: "Roxana Tunea",
                title: "Director, Product Revenue",
                keywords: ["director", "revenue", "product", "forecasting", "reporting"],
                description: "Manages the product revenue stream, focusing on accurate forecasting, reporting, and implementation of revenue recognition policies.",
                managerName: 'Eugene Cuoco',
                photoUrl: "https://placehold.co/100x100/374151/ffffff?text=RT"
            },
            {
                id: "3",
                team: "Financial Systems Oversight",
                name: "Altamash Faizan",
                title: "Project Manager, Operational...",
                keywords: ["project management", "operations", "implementation", "process improvement"],
                description: "Drives operational efficiency through project management of finance system rollouts and process improvement initiatives.",
                managerName: 'Eugene Cuoco', 
                photoUrl: "https://placehold.co/100x100/374151/ffffff?text=AF"
            },
             {
                id: "4",
                team: "Financial Systems Oversight",
                name: "Matthew Strickland",
                title: "Product Catalog Director",
                keywords: ["product catalog", "data governance", "sku management", "systems integration"],
                description: "Oversees the product catalog data structure, ensuring consistency and integrity for all financial reporting and transactional systems.",
                managerName: 'Eugene Cuoco',
                photoUrl: "https://placehold.co/100x100/374151/ffffff?text=MS"
            },
             {
                id: "5",
                team: "Financial Systems Oversight",
                name: "Nicholas Sanchez",
                title: "Associate Financial Analyst",
                keywords: ["analyst", "financial analysis"],
                description: "Provides analytical support and data validation.",
                managerName: 'Eugene Cuoco',
                photoUrl: "https://placehold.co/100x100/374151/ffffff?text=NS"
            },
            
            // --- NEW DATA (Matching Video) for Matthew Strickland ---
            {
                id: "gabriel_michael",
                name: "Gabriel Michael",
                title: "Product Data Operations Spec...",
                team: "Product Catalog",
                managerName: "Matthew Strickland",
                keywords: ["data operations", "product", "catalog"],
                description: "Handles daily product data operations and catalog maintenance.",
                photoUrl: "https://placehold.co/100x100/57534e/ffffff?text=GM"
            },
            {
                id: "jen_peterson",
                name: "Jen Peterson",
                title: "Product Data Operations Spec...",
                team: "Product Catalog",
                managerName: "Matthew Strickland",
                keywords: ["data", "operations", "sku"],
                description: "Ensures data quality in product listings.",
                photoUrl: "https://placehold.co/100x100/57534e/ffffff?text=JP"
            },
            {
                id: "jesse_renaud",
                name: "Jesse Renaud",
                title: "Product Data Operations Spec...",
                team: "Product Catalog",
                managerName: "Matthew Strickland",
                keywords: ["operations", "catalog", "systems"],
                description: "Supports catalog system integrations.",
                photoUrl: "https://placehold.co/100x100/57534e/ffffff?text=JR"
            },
            {
                id: "mark_belthauser",
                name: "Mark Belthauser",
                title: "Product Data Operations Spec...",
                team: "Product Catalog",
                managerName: "Matthew Strickland",
                keywords: ["data", "spec", "finance"],
                description: "Maintains financial data attributes for products.",
                photoUrl: "https://placehold.co/100x100/57534e/ffffff?text=MB"
            }
        ];

        // --- STATE & UTILS ---
        let idMap = {};
        let nameMap = {};
        let reportsMap = {}; // Maps Manager Name -> Array of Employee Objects
        let currentRootId = null;

        function initData() {
            // Build Maps
            ALL_DATA.forEach(p => {
                idMap[p.id] = p;
                nameMap[p.name] = p;
            });
            
            // Build Reports Map
            ALL_DATA.forEach(p => {
                if (p.managerName) {
                    if (!reportsMap[p.managerName]) {
                        reportsMap[p.managerName] = [];
                    }
                    reportsMap[p.managerName].push(p);
                }
            });

            // Find Default Root (Jerry)
            const root = ALL_DATA.find(p => p.managerName === "Greg Marino"); // Based on data
            if(root) currentRootId = root.id;
            
            renderView();
        }

        // --- RENDER LOGIC ---
        
        function renderView() {
            const container = document.getElementById('chart-container');
            const searchVal = document.getElementById('search-input').value.trim();

            if (searchVal) {
                renderSearchResults(searchVal, container);
            } else {
                renderDrillDown(currentRootId, container);
            }
        }

        function renderDrillDown(focusId, container) {
            const person = idMap[focusId];
            if (!person) return;

            const directReports = reportsMap[person.name] || [];
            const hasReports = directReports.length > 0;
            const manager = person.managerName && nameMap[person.managerName] ? nameMap[person.managerName] : null;

            let html = `<div class="drill-down-container fade-in">`;

            // 1. Parent / Breadcrumb Area
            if (manager) {
                html += `
                    <div class="parent-connector-area flex flex-col items-center">
                        <button onclick="drillTo('${manager.id}')" class="parent-pill group">
                            <svg class="w-4 h-4 text-gray-500 group-hover:text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 10l7-7m0 0l7 7m-7-7v18"></path></svg>
                            <span>Reports to: <span class="text-primary">${manager.name}</span></span>
                        </button>
                        <div class="connector-vertical-top"></div>
                    </div>
                `;
            }

            // 2. Focused Hero Card
            html += `
                <div class="hero-card-wrapper">
                    ${createCardHtml(person, true)} 
                </div>
            `;

            // 3. Children Area
            if (hasReports) {
                html += `
                    <div class="connector-vertical-bottom"></div>
                    <div class="children-bar"></div>
                    <div class="children-grid">
                        ${directReports.map(child => `
                            <div class="child-wrapper">
                                <div class="child-connector"></div>
                                ${createCardHtml(child, false)}
                            </div>
                        `).join('')}
                    </div>
                `;
            } else {
                // Leaf Node State
                html += `
                    <div class="mt-8 text-center text-gray-400 italic">
                        No direct reports
                    </div>
                `;
            }

            html += `</div>`;
            container.innerHTML = html;
        }

        function createCardHtml(data, isHero) {
            const keywordsArray = data.keywords;
            const keywords = keywordsArray.slice(0, 3).join(', ');
            const reports = reportsMap[data.name] || [];
            const reportCount = reports.length;
            
            // Hero card is slightly bigger? Handled by wrapper CSS.
            // We need a specific action button for "View Team" if it's NOT the hero but has reports.
            
            let actionBtn = '';
            // If card has reports and is NOT the currently focused hero, show Drill Down button
            if (reportCount > 0 && !isHero) {
                actionBtn = `
                    <button onclick="event.stopPropagation(); drillTo('${data.id}')" class="mt-3 w-full flex items-center justify-center gap-2 py-2 bg-indigo-50 text-indigo-700 hover:bg-indigo-100 rounded-lg text-sm font-semibold transition border border-indigo-200">
                        <span>View Team (${reportCount})</span>
                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                    </button>
                `;
            } else if (reportCount > 0 && isHero) {
                 actionBtn = `
                    <div class="mt-3 w-full text-center text-xs text-gray-400 font-medium uppercase tracking-wider">
                        Direct Reports Below
                    </div>
                `;
            }

            return `
                <div class="card-container cursor-pointer" onclick="flipCard(this)">
                    <div id="flip-card-${data.id}" class="flip-card">
                        <!-- Card Front -->
                        <div class="card-face card-front border border-gray-200">
                            <div class="flex items-start space-x-4">
                                <img class="w-16 h-16 rounded-full object-cover shadow-md border-2 border-white"
                                     src="${data.photoUrl}"
                                     alt="${data.name}">
                                <div>
                                    <p class="text-xs font-bold text-primary mb-0.5 truncate max-w-[150px]">${data.team}</p>
                                    <h3 class="text-lg font-bold text-gray-900 leading-tight">${data.name}</h3>
                                    <p class="text-xs text-gray-500 mt-1 leading-snug h-8 overflow-hidden">${data.title}</p>
                                </div>
                            </div>
                            
                            <div class="flex flex-col justify-end flex-grow mt-2">
                                <div class="pt-3 border-t border-gray-100">
                                    <p class="text-[10px] font-semibold text-gray-400 uppercase tracking-wide">Skills</p>
                                    <p class="text-xs text-gray-700 truncate mt-0.5">${keywords}</p>
                                </div>
                                ${actionBtn}
                            </div>
                            
                            <!-- Flip hint icon -->
                            <div class="absolute top-3 right-3 text-gray-300">
                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg>
                            </div>
                        </div>

                        <!-- Card Back -->
                        <div class="card-face card-back">
                            <div class="flex-grow overflow-y-auto keyword-list">
                                <h3 class="text-lg font-bold text-gray-900 mb-2">${data.team}</h3>
                                <p class="text-xs text-gray-700 leading-relaxed mb-4">${data.description}</p>
                                <p class="text-xs font-semibold text-gray-600 mb-2">Keywords:</p>
                                <div class="flex flex-wrap gap-1">
                                    ${keywordsArray.map(k => `<span class="px-2 py-0.5 text-[10px] font-medium bg-white text-gray-800 border border-gray-200 rounded-full shadow-sm">${k}</span>`).join('')}
                                </div>
                            </div>
                            <button class="mt-2 text-xs text-primary font-semibold flex items-center justify-center w-full py-1 hover:bg-white/50 rounded">
                                Back to Profile
                            </button>
                        </div>
                    </div>
                </div>
            `;
        }

        // --- SEARCH LOGIC ---
        function handleSearch() {
            renderView();
        }

        function renderSearchResults(query, container) {
            query = query.toLowerCase();
            const filtered = ALL_DATA.filter(item => {
                const textMatch = item.name.toLowerCase().includes(query) ||
                                  item.title.toLowerCase().includes(query) ||
                                  item.team.toLowerCase().includes(query);
                const keyMatch = item.keywords.some(k => k.toLowerCase().includes(query));
                return textMatch || keyMatch;
            });

            if (filtered.length === 0) {
                container.innerHTML = `<p class="text-center text-gray-500 mt-10">No results found.</p>`;
                return;
            }

            container.innerHTML = `
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 fade-in">
                    ${filtered.map(item => createCardHtml(item, false)).join('')}
                </div>
            `;
        }

        // --- ACTIONS ---
        window.flipCard = function(el) {
            const inner = el.querySelector('.flip-card');
            inner.classList.toggle('flipped');
        }

        window.drillTo = function(id) {
            currentRootId = id;
            // Clear search when navigating
            document.getElementById('search-input').value = '';
            renderView();
        }

        window.resetToRoot = function() {
            const root = ALL_DATA.find(p => p.managerName === "Greg Marino");
            if(root) currentRootId = root.id;
            document.getElementById('search-input').value = '';
            renderView();
        }

        // --- INIT ---
        window.onload = initData;

    </script>
</body>
</html>